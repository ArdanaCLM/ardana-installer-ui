{"name":"entry-scale-swift","version":2,"readme":{"md":"##Ardana Entry Scale Swift Example##\n\nThe input files in this example deploy a cloud that has the following characteristics:\n\n\n### Control Planes ###\n\n- A single control plane consisting of three servers that co-host all the required services\n  needed to support a swift only configuration. For example keystone, monasca, horizon,\n  opsconsole. These 3 servers also include the swift proxy, account, container and\n  swift ring building services.\n\n###Resource Pools###\n\n- Three swift object servers\n\n\n*Additional resource nodes can be added to the configuration.*\n\n\n###Deployer Node###\n\n\nThis configuration runs the lifecycle-manager (formerly referred to as the deployer) on a\ncontrol plane node. You need to include this node address in your servers.yml definition.\nThis function does not need a dedicated network.\n\n*The minimum server count for this example is therefore 7 servers (Lifecycle Manager (1)\n+ Control Plane (x3) + Swift Object (x3)*\n\nAn example set of servers are defined in ***data/servers.yml***. You will need to modify\nthis file to reflect your specific environment.\n\n\n###Networking###\n\nThe example requires the following networks:\n\nIPMI/iLO network, connected to the deployer and the IPMI/iLO ports of all servers\n\nA pair of bonded NICs which are used by the following networks:\n\n- External API - This is the network that users will use to make requests to the cloud\n- Cloud Management - This is the network that will be used for all internal traffic\n  between the cloud services, This network is also used to install and configure the nodes.\n  This network needs to be on an untagged VLAN\n- SWIFT - This network is used for internal Swift comunications between the Swift servers\n\nAn example set of networks are defined in ***data/networks.yml***. You will need to\nmodify this file to reflect your environment.\n\nThe example uses the devices hed3 & hed4 as a bonded network for all services.\nIf you need to modify these for your environment they are defined in\n***data/net_interfaces.yml*** The network devices eth3 & eth4 are renamed to devices\nhed4 & hed5 using the PCI bus mappings secified in  ***data/nic_mappings.yml***.\nYou may need to modify the PCI bus addresses to match your system.\n\n###Local Storage###\n\nAll servers should present a single OS disk, protected by a RAID controller. This\ndisk needs to be at least 512GB in capacity. In addition the example configures\nadditional disk depending on the role of the server:\n\n- Controllers:  /dev/sdb and /dev/sdc are configured to be used by Swift account\n  and container services\n- Object Servers:  /dev/sdb, /dev/sdc, /dev/sdd and /dev/sde are configured to be\n  used by the Swift object service\n\nAdditional discs can be configured for any of these roles by editing the corresponding\n***data/disks_*.yml*** file\n\n","html":"<dl class=\"dl-horizontal\">\n  <dt>Compute Hypervisor</dt><dd>KVM</dd>\n  <dt>Object Storage</dt><dd>Swift</dd>\n</dl>\n<p><b>Node roles</b></p>\n<ul>\n  <li>Control Plane (3), includes deployer</li>\n  <li>Swift object storage nodes (3)</li>\n</ul>\n\n<p>This example separates network traffic into three logical networks which are carried on a pair of bonded NICs on two physical ports.</p>\n\n<p><b>Logical network separation:</b></p>\n<ol>\n<li>External API - used by consumers of the cloud to make requests to the cloud APIs</li>\n<li>Management - used for all internal traffic between the cloud services. This network is also used to provision and configure the cloud servers.</li>\n<li>SWIFT - used for internal Swift communications between the Swift servers</li>\n</ol>\n<p>\nIn addition, each server is connected to a dedicated IPMI/iLO network.\n</p>\n<p>\nFor more information on Swift object storage, see the <a href=\"http://docs.mycloud.com/permalink/ardana- openstack/2.0/objectstorage_objectstorage_overview.html\" target=\"_blank\">object storage documentation</a>.\n</p>"},"fileInfo":{"configFile":"C:\\Users\\nwm\\ardana\\examples\\entry-scale-swift\\cloudConfig.yml","directory":"C:\\Users\\nwm\\ardana\\examples\\entry-scale-swift","files":["cloudConfig.yml","data\\control_plane.yml","data\\disks_controller_1TB.yml","data\\disks_controller.yml","data\\firewall_rules.yml","data\\disks_swobj.yml","data\\networks.yml","data\\network_groups.yml","data\\net_interfaces.yml","data\\nic_mappings.yml","data\\servers.yml","data\\server_groups.yml","data\\server_roles.yml","data\\swift\\rings.yml"],"sections":{"product":["cloudConfig.yml","data\\control_plane.yml","data\\disks_controller_1TB.yml","data\\disks_controller.yml","data\\firewall_rules.yml","data\\disks_swobj.yml","data\\networks.yml","data\\network_groups.yml","data\\net_interfaces.yml","data\\nic_mappings.yml","data\\servers.yml","data\\server_groups.yml","data\\server_roles.yml","data\\swift\\rings.yml"],"cloud":["cloudConfig.yml"],"control-planes":["data\\control_plane.yml"],"disk-models":["data\\disks_controller_1TB.yml","data\\disks_controller.yml","data\\disks_swobj.yml"],"firewall-rules":["data\\firewall_rules.yml"],"networks":["data\\networks.yml"],"network-groups":["data\\network_groups.yml"],"interface-models":["data\\net_interfaces.yml"],"nic-mappings":["data\\nic_mappings.yml"],"baremetal_network":["data\\servers.yml"],"servers":["data\\servers.yml"],"server-groups":["data\\server_groups.yml"],"server-roles":["data\\server_roles.yml"],"ring-specifications":["data\\swift\\rings.yml"]},"fileSectionMap":{"cloudConfig.yml":["product","cloud"],"data\\control_plane.yml":["product",{"control-planes":["control-plane-1"],"keyField":"name"}],"data\\disks_controller_1TB.yml":["product",{"disk-models":["CONTROLLER_1TB-DISKS"],"keyField":"name"}],"data\\disks_controller.yml":["product",{"disk-models":["CONTROLLER-DISKS"],"keyField":"name"}],"data\\firewall_rules.yml":["product",{"firewall-rules":["PING"],"keyField":"name"}],"data\\disks_swobj.yml":["product",{"disk-models":["SWOBJ-DISKS"],"keyField":"name"}],"data\\networks.yml":["product",{"networks":["EXTERNAL-API-NET","SWIFT-NET","MANAGEMENT-NET"],"keyField":"name"}],"data\\network_groups.yml":["product",{"network-groups":["EXTERNAL-API","MANAGEMENT","SWIFT"],"keyField":"name"}],"data\\net_interfaces.yml":["product",{"interface-models":["CONTROLLER-INTERFACES","SWOBJ-INTERFACES"],"keyField":"name"}],"data\\nic_mappings.yml":["product",{"nic-mappings":["HP-DL360-4PORT","MY-2PORT-SERVER"],"keyField":"name"}],"data\\servers.yml":["product","baremetal_network",{"servers":["swpac1","swpac2","swpac3","swobj1","swobj2","swobj3"],"keyField":"id"}],"data\\server_groups.yml":["product",{"server-groups":["CLOUD","AZ1","AZ2","AZ3","RACK1","RACK2","RACK3"],"keyField":"name"}],"data\\server_roles.yml":["product",{"server-roles":["CONTROLLER-ROLE","SWOBJ-ROLE"],"keyField":"name"}],"data\\swift\\rings.yml":["product",{"ring-specifications":["region1"],"keyField":"region-name"}]},"mtime":1449509082110},"errors":[],"inputModel":{"cloud":{"name":"entry-scale-swift","hostname-data":{"host-prefix":"ardana","member-prefix":"-m"},"ntp-servers":null,"dns-settings":null,"smtp-settings":null,"firewall-settings":{"enable":true,"logging":true}},"product":{"version":2},"control-planes":[{"name":"control-plane-1","control-plane-prefix":"cp1","region-name":"region1","failure-zones":["AZ1","AZ2","AZ3"],"common-service-components":["freezer-agent","logging-producer","monasca-agent","stunnel","lifecycle-manager-target"],"clusters":[{"name":"swpac","cluster-prefix":"c1","server-role":"CONTROLLER-ROLE","member-count":3,"allocation-policy":"strict","service-components":["lifecycle-manager","ntp-server","mysql","ip-cluster","apache2","keystone-api","keystone-client","rabbitmq","horizon","sherpa-api","memcached","ceilometer-api","ceilometer-collector","ceilometer-agent-central","ceilometer-agent-notification","ceilometer-expirer","ceilometer-common","ceilometer-client","zookeeper","kafka","vertica","storm","monasca-api","monasca-persister","monasca-notifier","monasca-threshold","monasca-client","logging-server","ops-console-web","ops-console-monitor","freezer-api","swift-ring-builder","swift-proxy","swift-account","swift-container","swift-client"]}],"resources":[{"name":"swobj","resource-prefix":"swobj","server-role":"SWOBJ-ROLE","allocation-policy":"strict","min-count":3,"service-components":["ntp-client","swift-object"]}]}],"disk-models":[{"name":"CONTROLLER_1TB-DISKS","volume-groups":[{"name":"ardana-vg","physical-volumes":["/dev/sda_root"],"logical-volumes":[{"name":"root","size":"5%","fstype":"ext4","mount":"/"},{"name":"crash","size":"8%","mount":"/var/crash","fstype":"ext4","mkfs-opts":"-O large_file"},{"name":"log","size":"10%","mount":"/var/log","fstype":"ext4","mkfs-opts":"-O large_file"},{"name":"mysql","size":"10%","mount":"/var/lib/mysql","fstype":"ext4","mkfs-opts":"-O large_file","consumer":{"name":"mysql"}},{"name":"rabbitmq","size":"8%","mount":"/var/lib/rabbitmq","fstype":"ext4","mkfs-opts":"-O large_file","consumer":{"name":"rabbitmq","rabbitmq_env":"home"}},{"name":"vertica","size":"5%","mount":"/var/vertica","fstype":"ext4","mkfs-opts":"-O large_file","consumer":{"name":"vertica"}},{"name":"kafka","size":"2%","mount":"/var/kafka","fstype":"ext4","mkfs-opts":"-O large_file","consumer":{"name":"kafka"}},{"name":"elasticsearch","size":"45%","mount":"/var/lib/elasticsearch","fstype":"ext4"},{"name":"zookeeper","size":"1%","mount":"/var/lib/zookeeper","fstype":"ext4"}],"consumer":{"name":"os"}}],"device-groups":[{"name":"swiftpac","devices":[{"name":"/dev/sdb"},{"name":"/dev/sdc"}],"consumer":{"name":"swift","attrs":{"rings":["account","container"]}}}]},{"name":"CONTROLLER-DISKS","volume-groups":[{"name":"ardana-vg","physical-volumes":["/dev/sda_root"],"logical-volumes":[{"name":"root","size":"10%","fstype":"ext4","mount":"/"},{"name":"crash","size":"13%","mount":"/var/crash","fstype":"ext4","mkfs-opts":"-O large_file"},{"name":"log","size":"13%","mount":"/var/log","fstype":"ext4","mkfs-opts":"-O large_file"},{"name":"mysql","size":"10%","mount":"/var/lib/mysql","fstype":"ext4","mkfs-opts":"-O large_file","consumer":{"name":"mysql"}},{"name":"rabbitmq","size":"13%","mount":"/var/lib/rabbitmq","fstype":"ext4","mkfs-opts":"-O large_file","consumer":{"name":"rabbitmq","rabbitmq_env":"home"}},{"name":"vertica","size":"3%","mount":"/var/vertica","fstype":"ext4","mkfs-opts":"-O large_file","consumer":{"name":"vertica"}},{"name":"kafka","size":"2%","mount":"/var/kafka","fstype":"ext4","mkfs-opts":"-O large_file","consumer":{"name":"kafka"}},{"name":"elasticsearch","size":"30%","mount":"/var/lib/elasticsearch","fstype":"ext4"},{"name":"zookeeper","size":"1%","mount":"/var/lib/zookeeper","fstype":"ext4"}],"consumer":{"name":"os"}}],"device-groups":[{"name":"swiftpac","devices":[{"name":"/dev/sdb"},{"name":"/dev/sdc"}],"consumer":{"name":"swift","attrs":{"rings":["account","container"]}}}]},{"name":"SWOBJ-DISKS","volume-groups":[{"name":"ardana-vg","physical-volumes":["/dev/sda_root"],"logical-volumes":[{"name":"root","size":"30%","fstype":"ext4","mount":"/"},{"name":"log","size":"45%","mount":"/var/log","fstype":"ext4","mkfs-opts":"-O large_file"},{"name":"crash","size":"20%","mount":"/var/crash","fstype":"ext4","mkfs-opts":"-O large_file"}],"consumer":{"name":"os"}}],"device-groups":[{"name":"swiftobj","devices":[{"name":"/dev/sdb"},{"name":"/dev/sdc"},{"name":"/dev/sdd"},{"name":"/dev/sde"}],"consumer":{"name":"swift","attrs":{"rings":["object-0"]}}}]}],"firewall-rules":[{"name":"PING","network-groups":["MANAGEMENT","EXTERNAL-API","SWIFT"],"rules":[{"type":"allow","remote-ip-prefix":"0.0.0.0/0","port-range-min":8,"port-range-max":0,"protocol":"icmp"}]}],"networks":[{"name":"EXTERNAL-API-NET","vlanid":101,"tagged-vlan":true,"cidr":"10.0.1.0/24","gateway-ip":"10.0.1.1","network-group":"EXTERNAL-API"},{"name":"SWIFT-NET","vlanid":102,"tagged-vlan":true,"cidr":"10.1.1.0/24","gateway-ip":"10.1.1.1","network-group":"SWIFT"},{"name":"MANAGEMENT-NET","vlanid":100,"tagged-vlan":false,"cidr":"10.241.17.0/24","gateway-ip":"10.241.17.1","network-group":"MANAGEMENT"}],"network-groups":[{"name":"EXTERNAL-API","hostname-suffix":"extapi","load-balancers":[{"provider":"ip-cluster","name":"extlb","external-name":null,"tls-components":["default"],"roles":["public"],"cert-file":"my-public-cert"}]},{"name":"MANAGEMENT","hostname-suffix":"mgmt","hostname":true,"component-endpoints":["default"],"routes":["default"],"load-balancers":[{"provider":"ip-cluster","name":"lb","components":["default"],"roles":["internal","admin"]}]},{"name":"SWIFT","hostname-suffix":"swift","component-endpoints":["swift-container","swift-account","swift-object"]}],"interface-models":[{"name":"CONTROLLER-INTERFACES","network-interfaces":[{"name":"BOND0","device":{"name":"bond0"},"bond-data":{"options":{"mode":"active-backup","miimon":200,"primary":"hed3"},"provider":"linux","devices":[{"name":"hed3"},{"name":"hed4"}]},"network-groups":["EXTERNAL-API","MANAGEMENT","SWIFT"]}]},{"name":"SWOBJ-INTERFACES","network-interfaces":[{"name":"BOND0","device":{"name":"bond0"},"bond-data":{"options":{"mode":"active-backup","miimon":200,"primary":"hed3"},"provider":"linux","devices":[{"name":"hed3"},{"name":"hed4"}]},"network-groups":["MANAGEMENT","SWIFT"]}]}],"nic-mappings":[{"name":"HP-DL360-4PORT","physical-ports":[{"logical-name":"hed1","type":"simple-port","bus-address":"0000:02:00.0"},{"logical-name":"hed2","type":"simple-port","bus-address":"0000:02:00.1"},{"logical-name":"hed3","type":"simple-port","bus-address":"0000:02:00.2"},{"logical-name":"hed4","type":"simple-port","bus-address":"0000:02:00.3"}]},{"name":"MY-2PORT-SERVER","physical-ports":[{"logical-name":"hed3","type":"simple-port","bus-address":"0000:04:00.0"},{"logical-name":"hed4","type":"simple-port","bus-address":"0000:04:00.1"}]}],"baremetal_network":{"subnet":"10.241.17.0","netmask":"255.255.255.0","gateway":"10.241.17.1","server_interface":"eth4"},"servers":[{"id":"swpac1","role":"CONTROLLER-ROLE","server-group":"RACK1","mac-addr":"5c:b9:01:89:c2:ac","ip-addr":"10.241.17.11","ilo-ip":"10.1.13.138","ilo-user":"admin","ilo-password":"password","nic-mapping":"HP-DL360-4PORT"},{"id":"swpac2","role":"CONTROLLER-ROLE","server-group":"RACK2","mac-addr":"5c:b9:01:89:c6:f4","ip-addr":"10.241.17.12","ilo-ip":"10.1.13.136","ilo-user":"admin","ilo-password":"password","nic-mapping":"HP-DL360-4PORT"},{"id":"swpac3","role":"CONTROLLER-ROLE","server-group":"RACK3","mac-addr":"5c:b9:01:89:c5:5c","ip-addr":"10.241.17.13","ilo-ip":"10.1.9.143","ilo-user":"admin","ilo-password":"password","nic-mapping":"HP-DL360-4PORT"},{"id":"swobj1","role":"SWOBJ-ROLE","server-group":"RACK1","mac-addr":"5c:b9:01:89:c6:e0","ip-addr":"10.241.17.14","ilo-ip":"10.1.9.149","ilo-user":"admin","ilo-password":"password","nic-mapping":"HP-DL360-4PORT"},{"id":"swobj2","role":"SWOBJ-ROLE","server-group":"RACK2","mac-addr":"8c:dc:d4:b5:cc:1c","ip-addr":"10.241.17.15","ilo-ip":"10.1.9.139","ilo-user":"admin","ilo-password":"password","nic-mapping":"HP-DL360-4PORT"},{"id":"swobj3","role":"SWOBJ-ROLE","server-group":"RACK3","mac-addr":"8c:dc:d4:b5:7a:30","ip-addr":"10.241.17.16","ilo-ip":"10.1.8.95","ilo-user":"admin","ilo-password":"password","nic-mapping":"HP-DL360-4PORT"}],"server-groups":[{"name":"CLOUD","server-groups":["AZ1","AZ2","AZ3"],"networks":["EXTERNAL-API-NET","MANAGEMENT-NET","SWIFT-NET"]},{"name":"AZ1","server-groups":["RACK1"]},{"name":"AZ2","server-groups":["RACK2"]},{"name":"AZ3","server-groups":["RACK3"]},{"name":"RACK1"},{"name":"RACK2"},{"name":"RACK3"}],"server-roles":[{"name":"CONTROLLER-ROLE","interface-model":"CONTROLLER-INTERFACES","disk-model":"CONTROLLER-DISKS"},{"name":"SWOBJ-ROLE","interface-model":"SWOBJ-INTERFACES","disk-model":"SWOBJ-DISKS"}],"ring-specifications":[{"region-name":"region1","rings":[{"name":"account","display-name":"Account Ring","min-part-time":16,"partition-power":12,"replication-policy":{"replica-count":3}},{"name":"container","display-name":"Container Ring","min-part-time":16,"partition-power":12,"replication-policy":{"replica-count":3}},{"name":"object-0","display-name":"General","default":"yes","min-part-time":16,"partition-power":12,"replication-policy":{"replica-count":3}}]}]}}