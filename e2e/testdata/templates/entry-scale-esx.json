{"name":"entry-scale-esx","version":2,"readme":{"html":"<dl class=\"dl-horizontal\">\n  <dt>Compute Hypervisor</dt><dd>VMWare&reg; ESX&reg;</dd>\n  <dt>Block Storage</dt><dd>provided by VMWare</dd>\n  <dt>Object Storage</dt><dd>minimal Swift on Control Plane servers</dd>\n</dl>\n<p><b>Node roles</b></p>\n<ul>\n  <li>Control Plane, includes Deployer node (3 nodes)</li>\n  <li>ESX Compute (minimum 1 node, added post-install by EON, please see <a href=\"http://www.docslinkgoeshere.com/permalink/ardana-openstack/2.0/install_entryscale_esx.html\" target=\"_blank\">ESX install docs</a> for more information</li>\n  <li>OVSvApp (minimum 1 node, added post-install by EON, please see <a href=\"http://www.docslinkgoeshere.com/permalink/ardana-openstack/2.0/install_entryscale_esx.html\" target=\"_blank\">ESX install docs</a> for more information</li>\n</ul>\n\n<p>This cloud model requires the following networks:</p>\n<p>IMPI/iLO network, connected to the deployer and the IPMI/iLO ports of all physical servers.</p>\n<p>A pair of bonded NICs which are used used by the following networks:</p>\n<ul>\n  <li>External API - This is the network that users will use to make requests to the cloud</li>\n  <li>External VM - This is the network that will be used to provide access to VMs (via floating IP addresses)</li>\n  <li>Guest - This is the network that will carry traffic between VMs on private networks within the cloud</li>\n  <li>Cloud Management - This is the network that will be used for all internal traffic between the cloud services</li>\n</ul>","md":"##Ardana Entry Scale Cloud with ESX Example##\n\nThe input files in this example deploy a cloud with ESX hypervisor that has the following characteristics:\n\n\n### Control Planes ###\n\n- A single control plane consisting of three servers that co-host all of the required services.\n\n###Resource Pools###\n\n- Activated vCenter clusters\n\n*EON service will add required information related to compute proxy and OVSvApp Nodes. The user need not add them*\n\n*Minimal Swift Resources are provided by the control plane*\n\n###Deployer Node###\n\nThis configuration runs the lifecycle-manager (formerly referred to as the deployer) on a control plane node.\nYou need to include this node address in your servers.yml definition. This function does not need a dedicated network.\n\n*The minimum server count for this example is therefore 4 servers (Control Plane (x3) + 1 activated vCenter cluster having atleast 1 host)*\n\nAn example set of servers are defined in ***data/servers.yml***.   You will need to modify this file to reflect your specific environment.\n\n\n###Networking###\n\nThe example requires the following networks:\n\nIMPI/iLO network, connected to the deployer and the IPMI/iLO ports of all servers\n\nA pair of bonded NICs which are used by the following networks:\n\n- External API - This is the network that users will use to make requests to the cloud\n- External VM - This is the network that will be used to provide access to VMs (via floating IP addresses)\n- Guest - This is the network that will carry traffic between VMs on private networks within the cloud\n- Cloud Management - This is the network that will be used for all internal traffic between the cloud services\n\n\nTRUNK network is the network that will be used to apply security group rules on tenant traffic.    It is managed internally by Ardana cloud and\nis restricted to the vCenter environment.\n\nESX-NET represents ESX deployer network that is used only to configure the ESX compute nodes in the cloud.  This deployer network should be\ndifferent from the pxe-based deployer network used by cobbler to standup the cloud controller cluster.\n\nNote that the EXTERNAL\\-API network must be reachable from the EXTERNAL\\-VM network if you want VMs to be able to make API calls to the cloud.\n\nThe Data Center Management network (which hosts the vcenter server) must be reachable from the Cloud Management network so that the controllers,\ncompute proxy and OVSvApp nodes can communicate to the vcenter server.\n\nAn example set of networks are defined in ***data/networks.yml***.    You will need to modify this file to reflect your environment.\n\nThe example uses the devices hed3 & hed4 as a bonded network for all services.  If you need to modify these for your environment they\nare defined in ***data/net_interfaces.yml***.    The network devices eth3 & eth4 are renamed to devices hed3 & hed4 using the PCI bus mappings\nsecified in  ***data/nic_mappings.yml***.    You may need to modify the PCI bus addresses to match your system.\n\n###Local Storage###\n\nAll servers should present a single OS disc, protected by a RAID controller.   This disk needs to be at least 512GB in capacity.\nIn addition the example configures one additional disk depending on the role of the server:\n\n- Controllers:  /dev/sdb is configured to be used by Swift\n\nAdditional discs can be configured for any of these roles by editing the corresponding ***data/disks_*.yml*** file\n"},"fileInfo":{"configFile":"C:\\Users\\nwm\\ardana\\examples\\entry-scale-esx\\cloudConfig.yml","directory":"C:\\Users\\nwm\\ardana\\examples\\entry-scale-esx","files":["cloudConfig.yml","data\\control_plane.yml","data\\disks_controller.yml","data\\disks_compute.yml","data\\firewall_rules.yml","data\\disks_controller_1TB.yml","data\\networks.yml","data\\nic_mappings.yml","data\\network_groups.yml","data\\pass_through.yml","data\\servers.yml","data\\net_interfaces.yml","data\\server_roles.yml","data\\swift\\rings.yml"],"sections":{"product":["cloudConfig.yml","data\\control_plane.yml","data\\disks_controller.yml","data\\disks_compute.yml","data\\firewall_rules.yml","data\\disks_controller_1TB.yml","data\\networks.yml","data\\nic_mappings.yml","data\\network_groups.yml","data\\pass_through.yml","data\\servers.yml","data\\net_interfaces.yml","data\\server_roles.yml","data\\swift\\rings.yml"],"cloud":["cloudConfig.yml"],"control-planes":["data\\control_plane.yml"],"disk-models":["data\\disks_controller.yml","data\\disks_compute.yml","data\\disks_controller_1TB.yml"],"firewall-rules":["data\\firewall_rules.yml"],"networks":["data\\networks.yml"],"nic-mappings":["data\\nic_mappings.yml"],"network-groups":["data\\network_groups.yml"],"pass-through":["data\\pass_through.yml"],"baremetal":["data\\servers.yml"],"servers":["data\\servers.yml"],"interface-models":["data\\net_interfaces.yml"],"server-roles":["data\\server_roles.yml"],"ring-specifications":["data\\swift\\rings.yml"]},"fileSectionMap":{"cloudConfig.yml":["product","cloud"],"data\\control_plane.yml":["product",{"control-planes":["control-plane-1"],"keyField":"name"}],"data\\disks_controller.yml":["product",{"disk-models":["CONTROLLER-DISKS"],"keyField":"name"}],"data\\disks_compute.yml":["product",{"disk-models":["COMPUTE-DISKS"],"keyField":"name"}],"data\\firewall_rules.yml":["product",{"firewall-rules":["SSH","PING"],"keyField":"name"}],"data\\disks_controller_1TB.yml":["product",{"disk-models":["CONTROLLER-1TB-DISKS"],"keyField":"name"}],"data\\networks.yml":["product",{"networks":["EXTERNAL-API-NET","EXTERNAL-VM-NET","GUEST-NET","MANAGEMENT-NET","TRUNK-NET","ESX-CONF-NET"],"keyField":"name"}],"data\\nic_mappings.yml":["product",{"nic-mappings":["HP-DL360-4PORT"],"keyField":"name"}],"data\\network_groups.yml":["product",{"network-groups":["EXTERNAL-API","EXTERNAL-VM","GUEST","MANAGEMENT","TRUNK","CONF"],"keyField":"name"}],"data\\pass_through.yml":["product","pass-through"],"data\\servers.yml":["product","baremetal",{"servers":["controller1","controller2","controller3"],"keyField":"id"}],"data\\net_interfaces.yml":["product",{"interface-models":["CONTROLLER-INTERFACES","ESX-COMPUTE-INTERFACES","OVSVAPP-INTERFACES"],"keyField":"name"}],"data\\server_roles.yml":["product",{"server-roles":["CONTROLLER-ROLE","ESX-COMPUTE-ROLE","OVSVAPP-ROLE"],"keyField":"name"}],"data\\swift\\rings.yml":["product",{"ring-specifications":["region1"],"keyField":"region-name"}]},"mtime":1456930314732},"errors":[],"inputModel":{"cloud":{"name":"entry-scale-esx","hostname-data":{"host-prefix":"ardana","member-prefix":"-m"},"ntp-servers":["pool.ntp.org"],"dns-settings":{"nameservers":["server1","server2","server3"]},"smtp-settings":null,"firewall-settings":{"enable":true,"logging":true}},"product":{"version":2},"control-planes":[{"name":"control-plane-1","control-plane-prefix":"cp1","region-name":"region1","common-service-components":["logging-producer","monasca-agent","freezer-agent","stunnel","lifecycle-manager-target"],"clusters":[{"name":"cluster1","cluster-prefix":"c1","server-role":"CONTROLLER-ROLE","member-count":3,"allocation-policy":"strict","service-components":["lifecycle-manager","ntp-server","swift-ring-builder","mysql","ip-cluster","apache2","keystone-api","keystone-client","rabbitmq","glance-api","glance-registry","glance-client","cinder-api","cinder-scheduler","cinder-volume","cinder-backup","cinder-client","nova-api","nova-scheduler","nova-conductor","nova-console-auth","nova-novncproxy","nova-client","neutron-server","neutron-ml2-plugin","neutron-vpn-agent","neutron-dhcp-agent","neutron-metadata-agent","neutron-openvswitch-agent","neutron-client","horizon","sherpa-api","swift-proxy","memcached","swift-account","swift-container","swift-object","swift-client","heat-api","heat-api-cfn","heat-api-cloudwatch","heat-engine","heat-client","openstack-client","ceilometer-api","ceilometer-collector","ceilometer-agent-central","ceilometer-agent-notification","ceilometer-expirer","ceilometer-common","ceilometer-client","zookeeper","kafka","vertica","storm","monasca-api","monasca-persister","monasca-notifier","monasca-threshold","monasca-client","logging-server","ops-console-web","ops-console-monitor","freezer-api","eon-api","eon-conductor"]}],"resources":[{"name":"esx-compute","resource-prefix":"esx-comp","server-role":"ESX-COMPUTE-ROLE","allocation-policy":"any","service-components":["nova-esx-compute-proxy","nova-compute","ntp-client"]},{"name":"esx-ovsvapp","resource-prefix":"esx-ovsvapp","server-role":"OVSVAPP-ROLE","allocation-policy":"any","service-components":["neutron-ovsvapp-agent","ntp-client"]}]}],"disk-models":[{"name":"CONTROLLER-DISKS","volume-groups":[{"name":"ardana-vg","physical-volumes":["/dev/sda_root"],"logical-volumes":[{"name":"root","size":"10%","fstype":"ext4","mount":"/"},{"name":"crash","size":"13%","mount":"/var/crash","fstype":"ext4","mkfs-opts":"-O large_file"},{"name":"log","size":"13%","mount":"/var/log","fstype":"ext4","mkfs-opts":"-O large_file"},{"name":"mysql","size":"10%","mount":"/var/lib/mysql","fstype":"ext4","mkfs-opts":"-O large_file","consumer":{"name":"mysql"}},{"name":"rabbitmq","size":"13%","mount":"/var/lib/rabbitmq","fstype":"ext4","mkfs-opts":"-O large_file","consumer":{"name":"rabbitmq","rabbitmq_env":"home"}},{"name":"vertica","size":"3%","mount":"/var/vertica","fstype":"ext4","mkfs-opts":"-O large_file","consumer":{"name":"vertica"}},{"name":"kafka","size":"2%","mount":"/var/kafka","fstype":"ext4","mkfs-opts":"-O large_file","consumer":{"name":"kafka"}},{"name":"elasticsearch","size":"30%","mount":"/var/lib/elasticsearch","fstype":"ext4"},{"name":"zookeeper","size":"1%","mount":"/var/lib/zookeeper","fstype":"ext4"}],"consumer":{"name":"os"}}],"device-groups":[{"name":"swiftobj","devices":[{"name":"/dev/sdb"},{"name":"/dev/sdc"}],"consumer":{"name":"swift","attrs":{"rings":["account","container","object-0"]}}}]},{"name":"COMPUTE-DISKS","volume-groups":[{"name":"ardana-vg","physical-volumes":["/dev/sda1"],"logical-volumes":[{"name":"root","size":"80%","fstype":"ext4","mount":"/"},{"name":"LV_CRASH","size":"15%","mount":"/var/crash","fstype":"ext4","mkfs-opts":"-O large_file"}]}]},{"name":"CONTROLLER-1TB-DISKS","volume-groups":[{"name":"ardana-vg","physical-volumes":["/dev/sda_root"],"logical-volumes":[{"name":"root","size":"5%","fstype":"ext4","mount":"/"},{"name":"crash","size":"8%","mount":"/var/crash","fstype":"ext4","mkfs-opts":"-O large_file"},{"name":"log","size":"10%","mount":"/var/log","fstype":"ext4","mkfs-opts":"-O large_file"},{"name":"mysql","size":"10%","mount":"/var/lib/mysql","fstype":"ext4","mkfs-opts":"-O large_file","consumer":{"name":"mysql"}},{"name":"rabbitmq","size":"8%","mount":"/var/lib/rabbitmq","fstype":"ext4","mkfs-opts":"-O large_file","consumer":{"name":"rabbitmq","rabbitmq_env":"home"}},{"name":"vertica","size":"5%","mount":"/var/vertica","fstype":"ext4","mkfs-opts":"-O large_file","consumer":{"name":"vertica"}},{"name":"kafka","size":"2%","mount":"/var/kafka","fstype":"ext4","mkfs-opts":"-O large_file","consumer":{"name":"kafka"}},{"name":"elasticsearch","size":"45%","mount":"/var/lib/elasticsearch","fstype":"ext4"},{"name":"zookeeper","size":"1%","mount":"/var/lib/zookeeper","fstype":"ext4"}],"consumer":{"name":"os"}}],"device-groups":[{"name":"swiftobj","devices":[{"name":"/dev/sdb"},{"name":"/dev/sdc"}],"consumer":{"name":"swift","attrs":{"rings":["account","container","object-0"]}}}]}],"firewall-rules":[{"name":"SSH","network-groups":["CONF"],"rules":[{"type":"allow","remote-ip-prefix":"0.0.0.0/0","port-range-min":22,"port-range-max":22,"protocol":"tcp"}]},{"name":"PING","network-groups":["MANAGEMENT","GUEST","EXTERNAL-API"],"rules":[{"type":"allow","remote-ip-prefix":"0.0.0.0/0","port-range-min":8,"port-range-max":0,"protocol":"icmp"}]}],"networks":[{"name":"EXTERNAL-API-NET","tagged-vlan":true,"vlanid":101,"cidr":"10.0.1.0/24","gateway-ip":"10.0.1.1","network-group":"EXTERNAL-API"},{"name":"EXTERNAL-VM-NET","tagged-vlan":true,"vlanid":102,"network-group":"EXTERNAL-VM"},{"name":"GUEST-NET","tagged-vlan":false,"network-group":"GUEST"},{"name":"MANAGEMENT-NET","tagged-vlan":false,"vlanid":100,"cidr":"192.168.10.0/24","gateway-ip":"192.168.10.1","network-group":"MANAGEMENT"},{"name":"TRUNK-NET","tagged-vlan":false,"network-group":"TRUNK"},{"name":"ESX-CONF-NET","vlanid":103,"tagged-vlan":false,"cidr":"192.168.50.0/24","gateway-ip":"192.168.50.1","network-group":"CONF"}],"nic-mappings":[{"name":"HP-DL360-4PORT","physical-ports":[{"logical-name":"hed1","type":"simple-port","bus-address":"0000:07:00.0"},{"logical-name":"hed2","type":"simple-port","bus-address":"0000:08:00.0"},{"logical-name":"hed3","type":"simple-port","bus-address":"0000:09:00.0"},{"logical-name":"hed4","type":"simple-port","bus-address":"0000:0a:00.0"}]}],"network-groups":[{"name":"EXTERNAL-API","hostname-suffix":"extapi","load-balancers":[{"provider":"ip-cluster","name":"extlb","external-name":null,"components":["default"],"roles":["public"],"tls-components":["default"],"cert-file":"my-public-cert"}]},{"name":"EXTERNAL-VM","tags":["neutron.l3_agent.external_network_bridge"]},{"name":"GUEST","hostname-suffix":"guest","tags":[{"neutron.networks.vlan":{"provider-physical-network":"physnet1","tenant-vlan-id-range":"100:200"}}]},{"name":"MANAGEMENT","hostname-suffix":"mgmt","hostname":true,"component-endpoints":["default"],"routes":["default","CONF"],"load-balancers":[{"provider":"ip-cluster","name":"lb","components":["default"],"roles":["internal","admin"]}],"tags":[{"neutron.networks.vlan":{"provider-physical-network":"physnet2"}},"neutron.ovsvapp.management_if"]},{"name":"TRUNK","hostname-suffix":"trunk","tags":["neutron.ovsvapp.sec_bridge_if"]},{"name":"CONF","hostname-suffix":"conf","routes":["MANAGEMENT"]}],"pass-through":{"global":{"esx_cloud":true}},"baremetal":{"subnet":"192.168.10.0","netmask":"255.255.255.0"},"servers":[{"id":"controller1","ip-addr":"192.168.10.3","role":"CONTROLLER-ROLE","nic-mapping":"HP-DL360-4PORT","mac-addr":"b2:72:8d:ac:7c:6f","ilo-ip":"192.168.9.3","ilo-password":"password","ilo-user":"admin"},{"id":"controller2","ip-addr":"192.168.10.4","role":"CONTROLLER-ROLE","nic-mapping":"HP-DL360-4PORT","mac-addr":"8a:8e:64:55:43:76","ilo-ip":"192.168.9.4","ilo-password":"password","ilo-user":"admin"},{"id":"controller3","ip-addr":"192.168.10.5","role":"CONTROLLER-ROLE","nic-mapping":"HP-DL360-4PORT","mac-addr":"26:67:3e:49:5a:a7","ilo-ip":"192.168.9.5","ilo-password":"password","ilo-user":"admin"}],"interface-models":[{"name":"CONTROLLER-INTERFACES","network-interfaces":[{"name":"BOND0","device":{"name":"bond0"},"bond-data":{"options":{"mode":"active-backup","miimon":200,"primary":"hed3"},"provider":"linux","devices":[{"name":"hed3"},{"name":"hed4"}]},"network-groups":["EXTERNAL-API","EXTERNAL-VM","GUEST","MANAGEMENT"]}]},{"name":"ESX-COMPUTE-INTERFACES","network-interfaces":[{"name":"eth0","device":{"name":"eth0"},"forced-network-groups":["CONF"]},{"name":"eth1","device":{"name":"eth1"},"network-groups":["MANAGEMENT"]}]},{"name":"OVSVAPP-INTERFACES","network-interfaces":[{"name":"eth0","device":{"name":"eth0"},"forced-network-groups":["CONF"],"network-groups":["MANAGEMENT"]},{"name":"eth1","device":{"name":"eth1"},"network-groups":["MANAGEMENT"]},{"name":"eth2","device":{"name":"eth2"},"network-groups":["GUEST"]},{"name":"eth3","device":{"name":"eth3"},"network-groups":["TRUNK"]}]}],"server-roles":[{"name":"CONTROLLER-ROLE","interface-model":"CONTROLLER-INTERFACES","disk-model":"CONTROLLER-DISKS"},{"name":"ESX-COMPUTE-ROLE","interface-model":"ESX-COMPUTE-INTERFACES","disk-model":"COMPUTE-DISKS"},{"name":"OVSVAPP-ROLE","interface-model":"OVSVAPP-INTERFACES","disk-model":"COMPUTE-DISKS"}],"ring-specifications":[{"region-name":"region1","rings":[{"name":"account","display-name":"Account Ring","min-part-time":16,"partition-power":12,"replication-policy":{"replica-count":3}},{"name":"container","display-name":"Container Ring","min-part-time":16,"partition-power":12,"replication-policy":{"replica-count":3}},{"name":"object-0","display-name":"General","default":"yes","min-part-time":16,"partition-power":12,"replication-policy":{"replica-count":3}}]}]}}